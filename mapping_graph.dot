digraph MidiMapping {
  rankdir=LR;
  node [fontname="Helvetica"];

  // Controller: Akai APC40
  // Mapping file: mappings\apc40.yaml

  // MIDI input nodes
  in_note_0_52 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 52"];
  in_note_0_49 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 49"];
  in_note_0_50 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 50"];
  in_note_0_57 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 57"];
  in_note_0_48 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 48"];
  in_cc_0_7 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="CC ch0 7"];
  in_note_0_56 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 56"];
  in_note_0_55 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 55"];
  in_note_0_54 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 54"];
  in_note_0_53 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 53"];
  in_note_1_52 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch1 52"];
  in_note_1_49 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch1 49"];
  in_note_1_50 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch1 50"];
  in_note_1_57 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch1 57"];
  in_note_1_48 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch1 48"];
  in_cc_1_7 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="CC ch1 7"];
  in_note_1_56 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch1 56"];
  in_note_1_55 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch1 55"];
  in_note_1_54 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch1 54"];
  in_note_1_53 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch1 53"];
  in_note_2_52 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch2 52"];
  in_note_2_49 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch2 49"];
  in_note_2_50 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch2 50"];
  in_note_2_57 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch2 57"];
  in_note_2_48 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch2 48"];
  in_cc_2_7 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="CC ch2 7"];
  in_note_2_56 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch2 56"];
  in_note_2_55 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch2 55"];
  in_note_2_54 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch2 54"];
  in_note_2_53 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch2 53"];
  in_note_3_52 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch3 52"];
  in_note_3_49 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch3 49"];
  in_note_3_50 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch3 50"];
  in_note_3_57 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch3 57"];
  in_note_3_48 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch3 48"];
  in_cc_3_7 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="CC ch3 7"];
  in_note_3_56 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch3 56"];
  in_note_3_55 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch3 55"];
  in_note_3_54 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch3 54"];
  in_note_3_53 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch3 53"];
  in_note_4_52 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch4 52"];
  in_note_4_49 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch4 49"];
  in_note_4_50 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch4 50"];
  in_note_4_57 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch4 57"];
  in_note_4_48 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch4 48"];
  in_cc_4_7 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="CC ch4 7"];
  in_note_4_56 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch4 56"];
  in_note_4_55 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch4 55"];
  in_note_4_54 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch4 54"];
  in_note_4_53 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch4 53"];
  in_note_5_52 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch5 52"];
  in_note_5_49 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch5 49"];
  in_note_5_50 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch5 50"];
  in_note_5_57 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch5 57"];
  in_note_5_48 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch5 48"];
  in_cc_5_7 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="CC ch5 7"];
  in_note_5_56 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch5 56"];
  in_note_5_55 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch5 55"];
  in_note_5_54 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch5 54"];
  in_note_5_53 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch5 53"];
  in_note_6_52 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch6 52"];
  in_note_6_49 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch6 49"];
  in_note_6_50 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch6 50"];
  in_note_6_57 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch6 57"];
  in_note_6_48 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch6 48"];
  in_cc_6_7 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="CC ch6 7"];
  in_note_6_56 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch6 56"];
  in_note_6_55 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch6 55"];
  in_note_6_54 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch6 54"];
  in_note_6_53 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch6 53"];
  in_note_7_52 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch7 52"];
  in_note_7_49 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch7 49"];
  in_note_7_50 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch7 50"];
  in_note_7_57 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch7 57"];
  in_note_7_48 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch7 48"];
  in_cc_7_7 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="CC ch7 7"];
  in_note_7_56 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch7 56"];
  in_note_7_55 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch7 55"];
  in_note_7_54 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch7 54"];
  in_note_7_53 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch7 53"];
  in_cc_0_15 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="CC ch0 15"];
  in_cc_0_47 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="CC ch0 47"];
  in_note_0_91 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 91"];
  in_note_0_92 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 92"];
  in_note_0_81 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 81"];
  in_note_0_101 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 101"];
  in_note_0_100 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 100"];
  in_note_0_99 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 99"];
  in_note_0_98 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 98"];
  in_note_0_82 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 82"];
  in_note_0_83 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 83"];
  in_note_0_84 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 84"];
  in_note_0_85 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 85"];
  in_note_0_86 [shape=ellipse, style=filled, fillcolor="#9ecae1", label="NOTE ch0 86"];

  // Action / state-machine nodes
  act_group1_playing [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 1: playing\n(short: toggle/next, long: off, dbl: auto)"];
  act_group1_effects [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 1: effects\n(short: toggle/next, long: off, dbl: auto)"];
  act_group1_transforms [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 1: transforms\n(short: toggle/next, long: off, dbl: auto)"];
  act_group1_dynamic_masks [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 1: dynamic_masks\n(short: toggle/next, long: off, dbl: auto)"];
  act_group1_color [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 1: color\n(short: toggle/next, long: off, dbl: auto)"];
  act_group1_opacity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 1: opacity\nCC → set_opacity_from_cc"];
  act_group1_intensity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 1: intensity preset 0.25\n(short: set, long: 0, dbl: random)"];
  act_group2_playing [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 2: playing\n(short: toggle/next, long: off, dbl: auto)"];
  act_group2_effects [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 2: effects\n(short: toggle/next, long: off, dbl: auto)"];
  act_group2_transforms [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 2: transforms\n(short: toggle/next, long: off, dbl: auto)"];
  act_group2_dynamic_masks [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 2: dynamic_masks\n(short: toggle/next, long: off, dbl: auto)"];
  act_group2_color [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 2: color\n(short: toggle/next, long: off, dbl: auto)"];
  act_group2_opacity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 2: opacity\nCC → set_opacity_from_cc"];
  act_group2_intensity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 2: intensity preset 0.25\n(short: set, long: 0, dbl: random)"];
  act_group3_playing [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 3: playing\n(short: toggle/next, long: off, dbl: auto)"];
  act_group3_effects [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 3: effects\n(short: toggle/next, long: off, dbl: auto)"];
  act_group3_transforms [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 3: transforms\n(short: toggle/next, long: off, dbl: auto)"];
  act_group3_dynamic_masks [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 3: dynamic_masks\n(short: toggle/next, long: off, dbl: auto)"];
  act_group3_color [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 3: color\n(short: toggle/next, long: off, dbl: auto)"];
  act_group3_opacity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 3: opacity\nCC → set_opacity_from_cc"];
  act_group3_intensity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 3: intensity preset 0.25\n(short: set, long: 0, dbl: random)"];
  act_group4_playing [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 4: playing\n(short: toggle/next, long: off, dbl: auto)"];
  act_group4_effects [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 4: effects\n(short: toggle/next, long: off, dbl: auto)"];
  act_group4_transforms [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 4: transforms\n(short: toggle/next, long: off, dbl: auto)"];
  act_group4_dynamic_masks [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 4: dynamic_masks\n(short: toggle/next, long: off, dbl: auto)"];
  act_group4_color [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 4: color\n(short: toggle/next, long: off, dbl: auto)"];
  act_group4_opacity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 4: opacity\nCC → set_opacity_from_cc"];
  act_group4_intensity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 4: intensity preset 0.25\n(short: set, long: 0, dbl: random)"];
  act_group5_playing [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 5: playing\n(short: toggle/next, long: off, dbl: auto)"];
  act_group5_effects [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 5: effects\n(short: toggle/next, long: off, dbl: auto)"];
  act_group5_transforms [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 5: transforms\n(short: toggle/next, long: off, dbl: auto)"];
  act_group5_dynamic_masks [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 5: dynamic_masks\n(short: toggle/next, long: off, dbl: auto)"];
  act_group5_color [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 5: color\n(short: toggle/next, long: off, dbl: auto)"];
  act_group5_opacity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 5: opacity\nCC → set_opacity_from_cc"];
  act_group5_intensity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 5: intensity preset 0.25\n(short: set, long: 0, dbl: random)"];
  act_group6_playing [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 6: playing\n(short: toggle/next, long: off, dbl: auto)"];
  act_group6_effects [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 6: effects\n(short: toggle/next, long: off, dbl: auto)"];
  act_group6_transforms [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 6: transforms\n(short: toggle/next, long: off, dbl: auto)"];
  act_group6_dynamic_masks [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 6: dynamic_masks\n(short: toggle/next, long: off, dbl: auto)"];
  act_group6_color [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 6: color\n(short: toggle/next, long: off, dbl: auto)"];
  act_group6_opacity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 6: opacity\nCC → set_opacity_from_cc"];
  act_group6_intensity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 6: intensity preset 0.25\n(short: set, long: 0, dbl: random)"];
  act_group7_playing [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 7: playing\n(short: toggle/next, long: off, dbl: auto)"];
  act_group7_effects [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 7: effects\n(short: toggle/next, long: off, dbl: auto)"];
  act_group7_transforms [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 7: transforms\n(short: toggle/next, long: off, dbl: auto)"];
  act_group7_dynamic_masks [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 7: dynamic_masks\n(short: toggle/next, long: off, dbl: auto)"];
  act_group7_color [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 7: color\n(short: toggle/next, long: off, dbl: auto)"];
  act_group7_opacity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 7: opacity\nCC → set_opacity_from_cc"];
  act_group7_intensity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 7: intensity preset 0.25\n(short: set, long: 0, dbl: random)"];
  act_group8_playing [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 8: playing\n(short: toggle/next, long: off, dbl: auto)"];
  act_group8_effects [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 8: effects\n(short: toggle/next, long: off, dbl: auto)"];
  act_group8_transforms [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 8: transforms\n(short: toggle/next, long: off, dbl: auto)"];
  act_group8_dynamic_masks [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 8: dynamic_masks\n(short: toggle/next, long: off, dbl: auto)"];
  act_group8_color [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 8: color\n(short: toggle/next, long: off, dbl: auto)"];
  act_group8_opacity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 8: opacity\nCC → set_opacity_from_cc"];
  act_group8_intensity [shape=box, style=filled, fillcolor="#fdd0a2", label="Group 8: intensity preset 0.25\n(short: set, long: 0, dbl: random)"];
  act_global_set_global_intensity_from_cc [shape=box, style=filled, fillcolor="#fdd0a2", label="Global: master intensity\nCC → /composition/master"];
  act_global_toggle_effects_all [shape=box, style=filled, fillcolor="#fdd0a2", label="Global: toggle_effects_all\n(stop-all semantics)"];
  act_global_set_global_autopilot_on [shape=box, style=filled, fillcolor="#fdd0a2", label="Global: autopilot ON"];
  act_global_set_global_autopilot_off [shape=box, style=filled, fillcolor="#fdd0a2", label="Global: autopilot OFF"];
  act_global_control_all_clips [shape=box, style=filled, fillcolor="#fdd0a2", label="Global: control_all_clips\n(start/next/stop fills)"];
  act_global_nudge_minus [shape=box, style=filled, fillcolor="#fdd0a2", label="Global: nudge_minus\n→ tempopull"];
  act_global_nudge_plus [shape=box, style=filled, fillcolor="#fdd0a2", label="Global: nudge_plus\n→ tempopush"];
  act_global_tap_tempo [shape=box, style=filled, fillcolor="#fdd0a2", label="Global: tap_tempo\n→ tempotap"];
  act_global_tempo_sync [shape=box, style=filled, fillcolor="#fdd0a2", label="Global: tempo_sync\n→ resync"];
  act_scene_1 [shape=box, style=filled, fillcolor="#fdd0a2", label="Scene 1: load/save/clear"];
  act_scene_2 [shape=box, style=filled, fillcolor="#fdd0a2", label="Scene 2: load/save/clear"];
  act_scene_3 [shape=box, style=filled, fillcolor="#fdd0a2", label="Scene 3: load/save/clear"];
  act_scene_4 [shape=box, style=filled, fillcolor="#fdd0a2", label="Scene 4: load/save/clear"];
  act_scene_5 [shape=box, style=filled, fillcolor="#fdd0a2", label="Scene 5: load/save/clear"];

  // Output / OSC hint nodes
  out_act_group1_playing [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 1 fill layers\n/ composition/layers/*/clips/*/connect"];
  out_act_group1_effects [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 1 role='effects'\n/ composition/layers/*/clips/*/connect"];
  out_act_group1_transforms [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 1 role='transforms'\n/ composition/layers/*/clips/*/connect"];
  out_act_group1_dynamic_masks [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 1 role='dynamic_masks'\n/ composition/layers/*/clips/*/connect"];
  out_act_group1_color [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 1 role='color'\n/ composition/layers/*/clips/*/connect"];
  out_act_group1_opacity [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 1 Router layer\n/ composition/layers/router/video/opacity"];
  out_act_group2_playing [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 2 fill layers\n/ composition/layers/*/clips/*/connect"];
  out_act_group2_effects [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 2 role='effects'\n/ composition/layers/*/clips/*/connect"];
  out_act_group2_transforms [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 2 role='transforms'\n/ composition/layers/*/clips/*/connect"];
  out_act_group2_dynamic_masks [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 2 role='dynamic_masks'\n/ composition/layers/*/clips/*/connect"];
  out_act_group2_color [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 2 role='color'\n/ composition/layers/*/clips/*/connect"];
  out_act_group2_opacity [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 2 Router layer\n/ composition/layers/router/video/opacity"];
  out_act_group3_playing [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 3 fill layers\n/ composition/layers/*/clips/*/connect"];
  out_act_group3_effects [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 3 role='effects'\n/ composition/layers/*/clips/*/connect"];
  out_act_group3_transforms [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 3 role='transforms'\n/ composition/layers/*/clips/*/connect"];
  out_act_group3_dynamic_masks [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 3 role='dynamic_masks'\n/ composition/layers/*/clips/*/connect"];
  out_act_group3_color [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 3 role='color'\n/ composition/layers/*/clips/*/connect"];
  out_act_group3_opacity [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 3 Router layer\n/ composition/layers/router/video/opacity"];
  out_act_group4_playing [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 4 fill layers\n/ composition/layers/*/clips/*/connect"];
  out_act_group4_effects [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 4 role='effects'\n/ composition/layers/*/clips/*/connect"];
  out_act_group4_transforms [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 4 role='transforms'\n/ composition/layers/*/clips/*/connect"];
  out_act_group4_dynamic_masks [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 4 role='dynamic_masks'\n/ composition/layers/*/clips/*/connect"];
  out_act_group4_color [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 4 role='color'\n/ composition/layers/*/clips/*/connect"];
  out_act_group4_opacity [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 4 Router layer\n/ composition/layers/router/video/opacity"];
  out_act_group5_playing [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 5 fill layers\n/ composition/layers/*/clips/*/connect"];
  out_act_group5_effects [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 5 role='effects'\n/ composition/layers/*/clips/*/connect"];
  out_act_group5_transforms [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 5 role='transforms'\n/ composition/layers/*/clips/*/connect"];
  out_act_group5_dynamic_masks [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 5 role='dynamic_masks'\n/ composition/layers/*/clips/*/connect"];
  out_act_group5_color [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 5 role='color'\n/ composition/layers/*/clips/*/connect"];
  out_act_group5_opacity [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 5 Router layer\n/ composition/layers/router/video/opacity"];
  out_act_group6_playing [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 6 fill layers\n/ composition/layers/*/clips/*/connect"];
  out_act_group6_effects [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 6 role='effects'\n/ composition/layers/*/clips/*/connect"];
  out_act_group6_transforms [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 6 role='transforms'\n/ composition/layers/*/clips/*/connect"];
  out_act_group6_dynamic_masks [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 6 role='dynamic_masks'\n/ composition/layers/*/clips/*/connect"];
  out_act_group6_color [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 6 role='color'\n/ composition/layers/*/clips/*/connect"];
  out_act_group6_opacity [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 6 Router layer\n/ composition/layers/router/video/opacity"];
  out_act_group7_playing [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 7 fill layers\n/ composition/layers/*/clips/*/connect"];
  out_act_group7_effects [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 7 role='effects'\n/ composition/layers/*/clips/*/connect"];
  out_act_group7_transforms [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 7 role='transforms'\n/ composition/layers/*/clips/*/connect"];
  out_act_group7_dynamic_masks [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 7 role='dynamic_masks'\n/ composition/layers/*/clips/*/connect"];
  out_act_group7_color [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 7 role='color'\n/ composition/layers/*/clips/*/connect"];
  out_act_group7_opacity [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 7 Router layer\n/ composition/layers/router/video/opacity"];
  out_act_group8_playing [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 8 fill layers\n/ composition/layers/*/clips/*/connect"];
  out_act_group8_effects [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 8 role='effects'\n/ composition/layers/*/clips/*/connect"];
  out_act_group8_transforms [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 8 role='transforms'\n/ composition/layers/*/clips/*/connect"];
  out_act_group8_dynamic_masks [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 8 role='dynamic_masks'\n/ composition/layers/*/clips/*/connect"];
  out_act_group8_color [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 8 role='color'\n/ composition/layers/*/clips/*/connect"];
  out_act_group8_opacity [shape=note, style=filled, fillcolor="#f0f0f0", label="APC group 8 Router layer\n/ composition/layers/router/video/opacity"];
  out_set_global_intensity_from_cc [shape=note, style=filled, fillcolor="#f0f0f0", label="/composition/master"];
  out_nudge_minus [shape=note, style=filled, fillcolor="#f0f0f0", label="/composition/tempocontroller/tempopull"];
  out_nudge_plus [shape=note, style=filled, fillcolor="#f0f0f0", label="/composition/tempocontroller/tempopush"];
  out_tap_tempo [shape=note, style=filled, fillcolor="#f0f0f0", label="/composition/tempocontroller/tempotap"];
  out_tempo_sync [shape=note, style=filled, fillcolor="#f0f0f0", label="/composition/tempocontroller/resync"];

  // MIDI -> action edges
  in_note_0_52 -> act_group1_playing;
  in_note_0_49 -> act_group1_effects;
  in_note_0_50 -> act_group1_transforms;
  in_note_0_57 -> act_group1_dynamic_masks;
  in_note_0_48 -> act_group1_color;
  in_cc_0_7 -> act_group1_opacity;
  in_note_0_56 -> act_group1_intensity;
  in_note_0_55 -> act_group1_intensity;
  in_note_0_54 -> act_group1_intensity;
  in_note_0_53 -> act_group1_intensity;
  in_note_1_52 -> act_group2_playing;
  in_note_1_49 -> act_group2_effects;
  in_note_1_50 -> act_group2_transforms;
  in_note_1_57 -> act_group2_dynamic_masks;
  in_note_1_48 -> act_group2_color;
  in_cc_1_7 -> act_group2_opacity;
  in_note_1_56 -> act_group2_intensity;
  in_note_1_55 -> act_group2_intensity;
  in_note_1_54 -> act_group2_intensity;
  in_note_1_53 -> act_group2_intensity;
  in_note_2_52 -> act_group3_playing;
  in_note_2_49 -> act_group3_effects;
  in_note_2_50 -> act_group3_transforms;
  in_note_2_57 -> act_group3_dynamic_masks;
  in_note_2_48 -> act_group3_color;
  in_cc_2_7 -> act_group3_opacity;
  in_note_2_56 -> act_group3_intensity;
  in_note_2_55 -> act_group3_intensity;
  in_note_2_54 -> act_group3_intensity;
  in_note_2_53 -> act_group3_intensity;
  in_note_3_52 -> act_group4_playing;
  in_note_3_49 -> act_group4_effects;
  in_note_3_50 -> act_group4_transforms;
  in_note_3_57 -> act_group4_dynamic_masks;
  in_note_3_48 -> act_group4_color;
  in_cc_3_7 -> act_group4_opacity;
  in_note_3_56 -> act_group4_intensity;
  in_note_3_55 -> act_group4_intensity;
  in_note_3_54 -> act_group4_intensity;
  in_note_3_53 -> act_group4_intensity;
  in_note_4_52 -> act_group5_playing;
  in_note_4_49 -> act_group5_effects;
  in_note_4_50 -> act_group5_transforms;
  in_note_4_57 -> act_group5_dynamic_masks;
  in_note_4_48 -> act_group5_color;
  in_cc_4_7 -> act_group5_opacity;
  in_note_4_56 -> act_group5_intensity;
  in_note_4_55 -> act_group5_intensity;
  in_note_4_54 -> act_group5_intensity;
  in_note_4_53 -> act_group5_intensity;
  in_note_5_52 -> act_group6_playing;
  in_note_5_49 -> act_group6_effects;
  in_note_5_50 -> act_group6_transforms;
  in_note_5_57 -> act_group6_dynamic_masks;
  in_note_5_48 -> act_group6_color;
  in_cc_5_7 -> act_group6_opacity;
  in_note_5_56 -> act_group6_intensity;
  in_note_5_55 -> act_group6_intensity;
  in_note_5_54 -> act_group6_intensity;
  in_note_5_53 -> act_group6_intensity;
  in_note_6_52 -> act_group7_playing;
  in_note_6_49 -> act_group7_effects;
  in_note_6_50 -> act_group7_transforms;
  in_note_6_57 -> act_group7_dynamic_masks;
  in_note_6_48 -> act_group7_color;
  in_cc_6_7 -> act_group7_opacity;
  in_note_6_56 -> act_group7_intensity;
  in_note_6_55 -> act_group7_intensity;
  in_note_6_54 -> act_group7_intensity;
  in_note_6_53 -> act_group7_intensity;
  in_note_7_52 -> act_group8_playing;
  in_note_7_49 -> act_group8_effects;
  in_note_7_50 -> act_group8_transforms;
  in_note_7_57 -> act_group8_dynamic_masks;
  in_note_7_48 -> act_group8_color;
  in_cc_7_7 -> act_group8_opacity;
  in_note_7_56 -> act_group8_intensity;
  in_note_7_55 -> act_group8_intensity;
  in_note_7_54 -> act_group8_intensity;
  in_note_7_53 -> act_group8_intensity;
  in_cc_0_15 -> act_global_set_global_intensity_from_cc;
  in_cc_0_47 -> act_global_toggle_effects_all;
  in_note_0_91 -> act_global_set_global_autopilot_on;
  in_note_0_92 -> act_global_set_global_autopilot_off;
  in_note_0_81 -> act_global_control_all_clips;
  in_note_0_101 -> act_global_nudge_minus;
  in_note_0_100 -> act_global_nudge_plus;
  in_note_0_99 -> act_global_tap_tempo;
  in_note_0_98 -> act_global_tempo_sync;
  in_note_0_82 -> act_scene_1;
  in_note_0_83 -> act_scene_2;
  in_note_0_84 -> act_scene_3;
  in_note_0_85 -> act_scene_4;
  in_note_0_86 -> act_scene_5;

  // Action -> output edges
  act_group1_playing -> out_act_group1_playing;
  act_group1_effects -> out_act_group1_effects;
  act_group1_transforms -> out_act_group1_transforms;
  act_group1_dynamic_masks -> out_act_group1_dynamic_masks;
  act_group1_color -> out_act_group1_color;
  act_group1_opacity -> out_act_group1_opacity;
  act_group2_playing -> out_act_group2_playing;
  act_group2_effects -> out_act_group2_effects;
  act_group2_transforms -> out_act_group2_transforms;
  act_group2_dynamic_masks -> out_act_group2_dynamic_masks;
  act_group2_color -> out_act_group2_color;
  act_group2_opacity -> out_act_group2_opacity;
  act_group3_playing -> out_act_group3_playing;
  act_group3_effects -> out_act_group3_effects;
  act_group3_transforms -> out_act_group3_transforms;
  act_group3_dynamic_masks -> out_act_group3_dynamic_masks;
  act_group3_color -> out_act_group3_color;
  act_group3_opacity -> out_act_group3_opacity;
  act_group4_playing -> out_act_group4_playing;
  act_group4_effects -> out_act_group4_effects;
  act_group4_transforms -> out_act_group4_transforms;
  act_group4_dynamic_masks -> out_act_group4_dynamic_masks;
  act_group4_color -> out_act_group4_color;
  act_group4_opacity -> out_act_group4_opacity;
  act_group5_playing -> out_act_group5_playing;
  act_group5_effects -> out_act_group5_effects;
  act_group5_transforms -> out_act_group5_transforms;
  act_group5_dynamic_masks -> out_act_group5_dynamic_masks;
  act_group5_color -> out_act_group5_color;
  act_group5_opacity -> out_act_group5_opacity;
  act_group6_playing -> out_act_group6_playing;
  act_group6_effects -> out_act_group6_effects;
  act_group6_transforms -> out_act_group6_transforms;
  act_group6_dynamic_masks -> out_act_group6_dynamic_masks;
  act_group6_color -> out_act_group6_color;
  act_group6_opacity -> out_act_group6_opacity;
  act_group7_playing -> out_act_group7_playing;
  act_group7_effects -> out_act_group7_effects;
  act_group7_transforms -> out_act_group7_transforms;
  act_group7_dynamic_masks -> out_act_group7_dynamic_masks;
  act_group7_color -> out_act_group7_color;
  act_group7_opacity -> out_act_group7_opacity;
  act_group8_playing -> out_act_group8_playing;
  act_group8_effects -> out_act_group8_effects;
  act_group8_transforms -> out_act_group8_transforms;
  act_group8_dynamic_masks -> out_act_group8_dynamic_masks;
  act_group8_color -> out_act_group8_color;
  act_group8_opacity -> out_act_group8_opacity;
  act_global_set_global_intensity_from_cc -> out_set_global_intensity_from_cc;
  act_global_nudge_minus -> out_nudge_minus;
  act_global_nudge_plus -> out_nudge_plus;
  act_global_tap_tempo -> out_tap_tempo;
  act_global_tempo_sync -> out_tempo_sync;

  subgraph cluster_legend {
    label="Legend";
    fontsize=10;
    key_in [shape=ellipse, style=filled, fillcolor="#9ecae1", label="MIDI input (note/CC)"];
    key_act [shape=box, style=filled, fillcolor="#fdd0a2", label="Action / state property"];
    key_out [shape=note, style=filled, fillcolor="#f0f0f0", label="Effect / OSC hint"];
    key_in -> key_act -> key_out [style=invis];
  }
}